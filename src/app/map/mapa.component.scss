.map-layout{display:flex;min-height:calc(100vh - 40px)}
.side {
  width: 320px;
  background: #181f32;
  border-right: 1.5px solid #232b41;
  padding: 18px 12px 12px 12px;
  overflow-y: auto;
  box-shadow: 2px 0 16px 0 rgba(20, 30, 50, 0.10);
}
.title{font-weight:700;margin:6px 0 12px;color:#e6eaf3;letter-spacing:0.1px}
.title.mt{margin-top:20px}
.muted{color:#b6c2e0;font-size:0.95rem}
.error{color:#ff6b81;font-size:0.95rem}
.card {
  border: 1.5px solid #232b41;
  border-radius: 14px;
  padding: 10px 8px;
  background: #141a29;
  box-shadow: 0 2px 12px 0 rgba(20, 30, 50, 0.10);
}
.list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px}
.item{padding:10px 12px;border-radius:10px;border:1.5px solid #232b41;font-size:1rem;display:flex;align-items:center;gap:10px;justify-content:space-between;color:#e6eaf3;background:#181f32;transition:background .15s,border .15s,color .15s}
.item:hover{background:#232b41;cursor:pointer;color:#fff}
.item.vehicle{display:flex;align-items:center;gap:10px}
.icon{font-size:1.1rem}
.dot{width:10px;height:10px;border-radius:50%;display:inline-block;background:#10b981;box-shadow:0 0 0 2px rgba(16,185,129,.15)}
.text{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0 6px}
.chev{color:#60a5fa}
.item.selected{border-color:#4ade80;background:#1a2a1a;color:#10b981}
.map-wrap{flex:1;position:relative}
.map{height:100%;min-height:500px}

.back-btn{display:inline-flex;align-items:center;justify-content:center;background:#111827;color:#fff;border-radius:999px;width:36px;height:36px;text-decoration:none;font-size:18px;border:1px solid #19338a;box-shadow:0 4px 10px rgba(0,0,0,.25);transition:background .15s ease, transform .1s ease;cursor:pointer;margin-bottom:12px}
.back-btn mat-icon{font-size:22px;color:#60a5fa;line-height:1}
.back-btn:hover{background:#1f2937}
.back-btn:hover mat-icon{color:#93c5fd}
.back-btn:active{transform:scale(.98)}
.back-btn:focus-visible{outline:3px solid #60a5fa;outline-offset:2px}

@media (hover: none) and (pointer: coarse){
  .back-btn{width:44px;height:44px;font-size:20px;top:68px}
}

/* --- UI extra --- */
.controls{display:flex;gap:10px;align-items:center;margin-top:12px}
.controls .status{margin-left:6px}

.btn{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:8px;border:1px solid transparent;font-weight:600;cursor:pointer;transition:transform .08s ease, box-shadow .12s ease, background .15s ease;color:#fff;box-shadow:0 4px 10px rgba(0,0,0,.12)}
.btn:active{transform:translateY(1px)}
.btn[disabled]{opacity:.6;cursor:not-allowed;box-shadow:none}
.btn .btn-icon{font-size:14px;line-height:1}

.btn-primary{background:#059669;border-color:#047857}
.btn-primary:hover{background:#0ea271}

.btn-danger{background:#dc2626;border-color:#b91c1c}
.btn-danger:hover{background:#ef4444}

/* Modern Leaflet controls (mapa) */
.leaflet-top .leaflet-control{margin-top:10px}
.leaflet-control-zoom a,
.leaflet-draw-toolbar a{background:#fff;color:#111827;border:1px solid #e5e7eb;width:36px;height:36px;line-height:34px;text-align:center;border-radius:10px!important;box-shadow:0 2px 6px rgba(0,0,0,.12);transition:background .15s,transform .05s,border-color .15s}
.leaflet-control-zoom a:hover,
.leaflet-draw-toolbar a:hover{background:#f3f4f6}
.leaflet-control-zoom a:active,
.leaflet-draw-toolbar a:active{transform:translateY(1px)}
.leaflet-draw-toolbar{border:none!important}
.leaflet-draw-toolbar a{background-position:center}
.leaflet-draw-toolbar a.leaflet-draw-draw-polyline{border-color:#60a5fa}
.leaflet-draw-toolbar a.leaflet-draw-draw-polyline:hover{background:#eff6ff}
.leaflet-draw-toolbar a.leaflet-draw-edit-edit{border-color:#10b981}
.leaflet-draw-toolbar a.leaflet-draw-edit-edit:hover{background:#ecfdf5}
.leaflet-draw-toolbar a.leaflet-draw-edit-remove{border-color:#fca5a5}
.leaflet-draw-toolbar a.leaflet-draw-edit-remove:hover{background:#fef2f2}
.leaflet-draw-actions{border:none;box-shadow:0 2px 6px rgba(0,0,0,.12);overflow:hidden;border-radius:10px}
.leaflet-draw-actions li a{background:#111827;color:#fff;padding:8px 12px;border:none}
.leaflet-draw-actions li a:hover{background:#1f2937}

/* Collapsible sections */
.collapsible{border:0;padding:0}
.collapsible summary{list-style:none;display:flex;align-items:center;gap:8px;padding:10px 6px;margin:0;border-radius:10px;cursor:pointer;user-select:none;color:#e6eaf3;background:#181f32}
.collapsible summary::-webkit-details-marker{display:none}
.collapsible .count{margin-left:auto;background:#232b41;border:1.5px solid #232b41;border-radius:999px;padding:2px 10px;font-size:.85rem;color:#60a5fa}
.collapsible .caret{color:#60a5fa}
.collapsible[open] .caret{transform:rotate(180deg);transition:transform .12s}
